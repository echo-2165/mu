<!doctype html>
<html lang="ta">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Website</title>
  <meta name="description" content="Valentine special â€” en kaadhalin vazhthukkal, small poems, hearts and a memory book (Tanglish)." />
  <!-- Primary font (kept Montserrat as requested) -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --max-w:760px;
      --bg-1:#fff8fb;
      --bg-2:#fff2f8;
      --accent-red:#ff4d86;
      --accent-pink:#ff9ccf;
      --text-color:#442033;
      --muted:#8b6276;
      --card-shadow: 0 20px 70px rgba(180,80,120,0.10);
      --soft-shadow: 0 12px 36px rgba(180,80,120,0.07);
      --radius:18px;
      --ctrl-bg: linear-gradient(90deg,var(--accent-red),var(--accent-pink));
      --ctrl-hover: linear-gradient(90deg,#ff6aa0,#ffc0e0);
    }

    /* Use same font everywhere */
    html,body{
      height:100%;
      margin:0;
      font-family: "Montserrat", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      background:
        radial-gradient(900px 420px at 8% 10%, rgba(255,200,240,0.06), transparent 12%),
        linear-gradient(180deg,var(--bg-1),var(--bg-2));
      color:var(--text-color);
      -webkit-tap-highlight-color: transparent;
      touch-action: manipulation;
      -webkit-text-size-adjust:100%;
      scroll-behavior: smooth;

      /* Force same small-caps style everywhere. */
      /* text-transform: lowercase + small-caps makes Latin letters render as small-caps.
         Note: Tamil script has no case, so it will render normally (same font). */
      font-variant-caps: all-small-caps;
      font-feature-settings: "smcp" 1, "c2sc" 1;
      text-transform: none; /* we'll apply lowercase at element level where safe */
    }

    /* Apply lowercase + small-caps for Latin characters while keeping Tamil unaffected.
       Using a selector that targets ASCII letters via custom property trick:
       we apply lowercase to all elements, but restore where it would be inappropriate
       (inputs, code, pre). This approach ensures consistent visual small-caps for latin text. */
    * { font-variant-caps: all-small-caps; font-feature-settings: "smcp" 1, "c2sc" 1; }

    /* Convert Latin letters to lowercase so small-caps rendering is consistent.
       For most elements this is safe; exceptions (inputs, buttons) keep user interaction text intact. */
    body, .card, .title, .subtitle, .greeting, .lead, .section-title, .poem,
    .face, .face .title-card, .face .desc, .page, footer, .v-pill, .gift, .ctrl {
      text-transform: lowercase;
    }

    /* Keep form controls and interactive text readable (don't force lowercase there) */
    input, textarea, select, button, [contenteditable="true"] { text-transform: none; }

    .wrap{
      max-width:var(--max-w);
      margin:0 auto;
      padding:18px 14px 110px;
      min-height:100vh;
      position:relative;
      text-align:center;
      overflow-x:hidden;
    }

    header{ display:flex; gap:12px; align-items:center; justify-content:center; margin-bottom:8px; flex-direction:column; }
    .brand{ display:flex; gap:12px; align-items:center; justify-content:center; }
    .title{
      font-size:22px;
      margin:0;
      color:var(--accent-red);
      line-height:1;
      cursor:pointer;
      text-align:center;
      letter-spacing:0.6px;
    }
    .subtitle{ margin:6px 0 0; font-size:13px; color:var(--muted); text-align:center; letter-spacing:0.4px; }

    .valentine-banner{ margin-top:10px; display:flex; gap:12px; align-items:center; justify-content:center; }
    .v-pill{ background: var(--ctrl-bg); color:white; padding:8px 12px; border-radius:999px; font-weight:700; font-size:13px; box-shadow: 0 12px 36px rgba(255,77,134,0.14); text-align:center; text-transform: lowercase; }

    .parallax-layer{ position:fixed; pointer-events:none; z-index:0; inset:0; }
    .parallax-blob{ position:absolute; border-radius:50%; filter: blur(18px); opacity:0.95; mix-blend-mode:screen; will-change: transform; }

    .card{ margin-top:16px; padding:16px; border-radius:var(--radius); background: linear-gradient(180deg, rgba(255,255,255,0.82), rgba(255,250,254,0.96)); box-shadow: var(--card-shadow); border: 1px solid rgba(255,255,255,0.7); backdrop-filter: blur(8px) saturate(120%); -webkit-backdrop-filter: blur(8px) saturate(120%); text-align:center; position:relative; z-index:1; }

    .hero{ display:flex; gap:12px; align-items:center; padding:12px; border-radius:14px; background: linear-gradient(90deg, rgba(255,235,245,0.6), rgba(255,245,250,0.78)); box-shadow: var(--soft-shadow); position:relative; overflow:visible; flex-direction:column; justify-content:center; }
    .greeting{ font-size:20px; margin:8px 0 6px; color:var(--accent-pink); text-align:center; }
    .lead{ font-size:14px; color:var(--muted); margin:8px 0 0; text-align:center; max-width:86%; margin-left:auto; margin-right:auto; }

    .section-title{ font-size:12px; color:var(--muted); letter-spacing:1.2px; margin:0 0 10px; text-align:center; text-transform: lowercase; }
    .poem{ font-size:16px; color:var(--text-color); line-height:1.6; text-align:center; }

    /* reveal */
    .reveal{ opacity:0; transform: translateY(26px) translateZ(-20px) scale(0.98); transition: transform 720ms cubic-bezier(.2,.9,.25,1), opacity 720ms cubic-bezier(.2,.9,.25,1); will-change: transform, opacity; perspective:900px; }
    .reveal.visible{ opacity:1; transform: translateY(0) translateZ(0) scale(1); }

    .blocks{ display:grid; grid-template-columns: repeat(3, 1fr); gap:12px; margin-top:8px; justify-items:center; }
    .flip-card{ width:100%; min-height:108px; perspective:900px; user-select:none; -webkit-user-select:none; touch-action:manipulation; }
    .flip-inner{ position:relative; width:100%; min-height:108px; transform-style:preserve-3d; transition: transform 520ms cubic-bezier(.2,.9,.2,1); border-radius:14px; display:flex; align-items:center; justify-content:center; }
    .flip-card.flipped .flip-inner{ transform: rotateY(180deg); }
    .face{ position:absolute; inset:0; backface-visibility:hidden; border-radius:12px; padding:14px; display:flex; align-items:center; justify-content:center; flex-direction:column; box-shadow: 0 14px 36px rgba(90,30,50,0.06); background: linear-gradient(180deg,#fff7fb,#fff1f6); }
    .face.back{ transform: rotateY(180deg); background: linear-gradient(180deg,#fff,#fff8fb); color:#341427; }

    .face .title-card{ font-size:14px; margin-bottom:6px; font-weight:700; color:var(--accent-red); text-transform: lowercase; }
    .face .desc{ color:var(--muted); font-size:13px; }

    .dragging{ transform: scale(1.02) rotate(0.6deg); box-shadow: 0 34px 90px rgba(120,30,50,0.12); z-index:60; }

    .gift-wrapper{ display:flex; justify-content:center; align-items:center; margin-top:8px; }
    .gift{ min-width:100px; height:100px; border-radius:16px; padding:12px; display:flex; flex-direction:column; align-items:center; justify-content:center; background: linear-gradient(180deg,#fff5f8,#ffeef6); box-shadow: 0 16px 44px rgba(180,80,120,0.08); cursor:pointer; border:1px solid rgba(255,255,255,0.7); transition: transform 320ms cubic-bezier(.2,.9,.2,1), box-shadow 320ms; }
    .gift:active{ transform: translateY(-8px) scale(1.02); box-shadow: 0 28px 70px rgba(120,30,50,0.12); }

    .image-modal{ position:fixed; inset:0; display:none; align-items:center; justify-content:center; z-index:360; background: rgba(20,8,20,0.6); padding:22px; backdrop-filter: blur(6px); }
    .image-modal.open{ display:flex; }
    .image-card{ width:100%; max-width:760px; border-radius:14px; overflow:hidden; transform-origin:center; animation: imageIn 420ms cubic-bezier(.2,.9,.2,1); background:#fff; }
    .image-card img{ width:100%; height:auto; display:block; }
    .image-card .caption{ padding:12px; text-align:center; color:var(--text-color); background: linear-gradient(180deg,#fff,#fff8fb); }
    @keyframes imageIn{ from{ transform: scale(0.94) translateY(22px); opacity:0; } to{ transform: scale(1) translateY(0); opacity:1; } }
    .close-btn{ position:absolute; right:18px; top:18px; background:rgba(255,255,255,0.95); border-radius:10px; padding:8px; border:none; cursor:pointer; box-shadow:0 8px 20px rgba(0,0,0,0.08); }

    /* Book styles */
    .book{ margin-top:16px; display:flex; align-items:center; justify-content:center; gap:12px; flex-direction:column; }
    .book-view{ width:100%; max-width:560px; height:240px; perspective:1400px; position:relative; }
    .page{ width:100%; height:100%; position:absolute; left:0; top:0; transform-origin:left center; transition: transform 720ms cubic-bezier(.2,.9,.25,1), opacity 420ms ease; border-radius:12px; overflow:hidden; box-shadow: 0 30px 80px rgba(35,10,30,0.18); background:linear-gradient(180deg,#fff8fb,#fff4f6); display:flex; align-items:center; justify-content:center; flex-direction:column; text-align:center; padding:14px; box-sizing:border-box; }
    .page.hidden{ opacity:0; pointer-events:none; }

    .page h3 { font-size:18px; margin:0 0 8px; color:var(--accent-red); text-transform: lowercase; }
    .page div { font-size:14px; color:var(--muted); max-width:86%; }

    .book-controls{ display:flex; gap:12px; justify-content:center; margin-top:8px; }

    .ctrl{
      -webkit-appearance:none;
      appearance:none;
      border: none;
      padding:10px 14px;
      font-size:14px;
      border-radius:999px;
      color:white;
      background: var(--ctrl-bg);
      box-shadow: 0 10px 30px rgba(255,32,74,0.14);
      cursor:pointer;
      transition: transform 160ms ease, box-shadow 160ms ease, background 180ms ease;
    }
    .ctrl:hover{ transform: translateY(-3px); background: var(--ctrl-hover); box-shadow: 0 16px 40px rgba(255,32,74,0.18); }
    .ctrl:active{ transform: translateY(0px) scale(0.98); box-shadow: 0 8px 20px rgba(255,32,74,0.12); }
    .ctrl:focus{ outline: 3px solid rgba(255,106,166,0.12); outline-offset:4px; }

    footer{ margin-top:22px; color:var(--muted); font-size:13px; text-align:center; display:flex; gap:8px; align-items:center; justify-content:center; flex-direction:row; }
    .heartbeat{ width:18px; height:18px; display:inline-grid; place-items:center; transform-origin:center; animation: footerBeat 1200ms infinite; }
    .heartbeat svg{ width:18px; height:18px; display:block; fill:var(--accent-red); }
    @keyframes footerBeat{ 0%{ transform: scale(1); } 30%{ transform: scale(1.28); } 60%{ transform: scale(1); } 100%{ transform: scale(1); } }

    /* Particle styles */
    #particle-layer{ position:fixed; inset:0; pointer-events:none; z-index:140; }
    .particle{ position:fixed; transform: translate(-50%,-50%); pointer-events:auto; will-change: transform, opacity; user-select:none; -webkit-user-select:none; touch-action:none; font-family:inherit; }
    .particle svg{ display:block; width:100%; height:100%; }

    /* PIN Protection Styles */
    .pin-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: 
        radial-gradient(900px 420px at 8% 10%, rgba(255,200,240,0.06), transparent 12%),
        linear-gradient(180deg,var(--bg-1),var(--bg-2));
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 1000;
      transition: opacity 0.5s ease;
    }

    .pin-container {
      background: linear-gradient(180deg, rgba(255,255,255,0.82), rgba(255,250,254,0.96));
      box-shadow: var(--card-shadow);
      border-radius: var(--radius);
      padding: 30px;
      text-align: center;
      max-width: 400px;
      width: 90%;
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
    }

    .pin-title {
      font-size: 24px;
      margin-bottom: 20px;
      color: var(--accent-red);
    }

    .pin-input-container {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin: 20px 0;
    }

    .pin-input {
      width: 50px;
      height: 60px;
      text-align: center;
      font-size: 24px;
      border: 2px solid var(--accent-pink);
      border-radius: 10px;
      background: rgba(255, 255, 255, 0.7);
      outline: none;
      caret-color: transparent;
    }

    .pin-input:focus {
      border-color: var(--accent-red);
      box-shadow: 0 0 0 3px rgba(255, 77, 134, 0.2);
    }

    .pin-error {
      color: #ff4d4d;
      margin: 10px 0;
      min-height: 20px;
      font-size: 14px;
    }

    .pin-submit {
      background: var(--ctrl-bg);
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 999px;
      font-size: 16px;
      cursor: pointer;
      margin-top: 10px;
      transition: transform 160ms ease, box-shadow 160ms ease;
    }

    .pin-submit:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 20px rgba(255, 77, 134, 0.2);
    }

    .hidden {
      display: none !important;
    }

    @media (max-width:720px){
      .blocks{ grid-template-columns: repeat(2, 1fr); } 
      .book-view{ height:200px; } 
      .gift{ min-width:86px; height:86px; }
      .pin-input {
        width: 40px;
        height: 50px;
        font-size: 20px;
      }
    }
    @media print{ .modal, .image-modal, #particle-layer { display:none !important; } .card{ box-shadow:none !important; background:transparent !important; border:none !important; } }
  </style>
</head>
<body>
  <!-- PIN Protection Overlay -->
  <div id="pinOverlay" class="pin-overlay">
    <div class="pin-container">
      <h2 class="pin-title">Enter PIN to Access Site</h2>
      <p>Please enter the 4-digit PIN to view this page</p>
      
      <div class="pin-input-container">
        <input type="password" class="pin-input" maxlength="1" data-index="0" autofocus>
        <input type="password" class="pin-input" maxlength="1" data-index="1">
        <input type="password" class="pin-input" maxlength="1" data-index="2">
        <input type="password" class="pin-input" maxlength="1" data-index="3">
      </div>
      
      <div id="pinError" class="pin-error"></div>
      
      <button id="pinSubmit" class="pin-submit">â¤ï¸â€ğŸ©¹</button>
    </div>
  </div>

  <div class="parallax-layer" aria-hidden="true">
    <div class="parallax-blob" id="blobA" style="width:420px;height:420px;left:-120px;top:-120px;background:linear-gradient(90deg,#ffd6f2,#ffb6dd);"></div>
    <div class="parallax-blob" id="blobB" style="width:320px;height:320px;right:-80px;bottom:-120px;background:linear-gradient(90deg,#fff0f7,#ffd6ea);opacity:0.85;"></div>
  </div>

  <main class="wrap" id="app" aria-live="polite">
    <header>
      <div class="brand">
        <div>
          <h1 class="title" id="pageTitle" tabindex="0">à®à®©à¯ à®‡à®³à®µà®°à®šà®¿à®•à¯à®•à®¾à®• ğŸ’•</h1>
          <p class="subtitle">à®¨à¯€ à®¤à®¿à®°à¯à®Ÿà®¿à®¯ à®‡à®¤à®¯à®¤à¯à®¤à®¿à®²à®¿à®°à¯à®¨à¯à®¤à¯ ğŸ˜</p>
        </div>
      </div>
    </header>

    <div class="valentine-banner">
      <div class="v-pill" aria-hidden="true">Happy Valentine chellom ğŸ’</div>
    </div>

    <section class="card reveal pop-in" data-idx="1" id="intro">
      <div class="hero">
        <p class="greeting">i love you ğŸ˜˜</p>
        <p class="lead">un kannu ğŸ‘€ un nalla manasu ğŸ’• unoda chutti kurumbu ğŸ‘» yepavum poi pesadha andha nalla gunam ğŸ˜‡ yelamey serndhu enna kavuthuruchi di ğŸ¤—</p>
      </div>
    </section>

    <section class="card reveal" data-idx="2">
      <p class="section-title">pattu ğŸ˜‰</p>
      <div class="poem">unaku theriyumo theriyadho nee dhan en first crush ğŸ¥° last-um nee dhan ğŸ«£ unna first time 11th class-la patha odaney pudichi poiruchi ğŸ™ˆ aana unkita sonadhu dhan illa ğŸ˜</div>
    </section>

    <section class="card reveal" data-idx="3">
      <p class="section-title">thangom ğŸ˜š</p>
      <div class="poem">idhu varaikum namakulla yevlo sanda vandhuruku ğŸ˜“ aana nee yepavum enna vitu ponadhey illa ğŸ¤— unna maari ponnu kedaika naa romba kuduthu vachirukanum ğŸ¥¹</div>
    </section>

    <section class="card reveal" data-idx="4">
      <p class="section-title">kanmani ğŸ˜˜</p>
      <div class="poem">Naan mudivu paniten da ma â¤ï¸â€ğŸ©¹ yenna sanda vandhalum sari unna vitu pora idea illa ğŸ«‚ enaku nee venum ğŸ’• yepovum ğŸ˜Š</div>
    </section>

    <!-- DISABLE drag inside this section by adding data-drag="false" -->
    <section class="card reveal visible" data-idx="5" data-drag="false">
      <p class="section-title">box-a-laam touch panni paaru back side theriyum ğŸ¤«</p>
      <div class="blocks" id="blocks">
        <div class="flip-card" data-id="1" tabindex="0">
          <div class="flip-inner">
            <div class="face front"><div class="title-card">ğŸ©·</div><div class="desc">Un voice romba cute aa irukum</div></div>
            <div class="face back"><div class="title-card">ğŸ¤­</div><div class="desc">oru kuzhandha maari</div></div>
          </div>
        </div>

        <div class="flip-card" data-id="2" tabindex="0">
          <div class="flip-inner">
            <div class="face front"><div class="title-card">ğŸ¥°</div><div class="desc">eyes-uh azhaga irukum</div></div>
            <div class="face back"><div class="title-card">ğŸ«£</div><div class="desc">Ana kovama pakkumbhodhu illa</div></div>
          </div>
        </div>

        <div class="flip-card" data-id="3" tabindex="0">
          <div class="flip-inner">
            <div class="face front"><div class="title-card">ğŸ˜š</div><div class="desc">nee romba special aana ponnu</div></div>
            <div class="face back"><div class="title-card">ğŸ¤ª</div><div class="desc">yengayum kedaikadha adhisaya uyirinam</div></div>
          </div>
        </div>

        <div class="flip-card" data-id="4" tabindex="0">
          <div class="flip-inner">
            <div class="face front"><div class="title-card">â¤ï¸â€ğŸ©¹</div><div class="desc">caring la unna adichikka aaley illa</div></div>
            <div class="face back"><div class="title-card"></div><div class="desc">sometimes kaadhu valikum ğŸ™‰</div></div>
          </div>
        </div>

        <div class="flip-card" data-id="5" tabindex="0">
          <div class="flip-inner">
            <div class="face front"><div class="title-card">ğŸ‘©â€â¤ï¸â€ğŸ’‹â€ğŸ‘¨</div><div class="desc">idhey maari nama yepavum onna irukanum</div></div>
            <div class="face back"><div class="title-card">ğŸ˜‘</div><div class="desc">idhey maari-na sanda potukitu illa</div></div>
          </div>
        </div>

        <div class="flip-card" data-id="6" tabindex="0">
          <div class="flip-inner">
            <div class="face front"><div class="title-card">ğŸ«‚</div><div class="desc">thanks di yellathukum</div></div>
            <div class="face back"><div class="title-card">ğŸ¥¹</div><div class="desc">and mutha ğŸ˜˜</div></div>
          </div>
        </div>

      </div>
      <div style="font-size:12px;color:var(--muted);margin-top:10px;">namma rendu per kulla yaar vandhalum sari namma onna irukanum di â¤ï¸â€ğŸ©¹ oruthara oruthar vittu kudukama ğŸ‘©â€â¤ï¸â€ğŸ‘¨</div>
    </section>

    <section class="card reveal" data-idx="6">
      <p class="section-title">oru sila advice</p>
      <div class="book" id="book">
        <div class="book-view" id="bookView" aria-live="polite">
          <div class="page" data-page="0" style="z-index:50">
            <h3 style="margin:0 0 8px;">ğŸ˜Š</h3>
            <div style="max-width:90%;color:var(--muted)">time ku sapdu thoongu odamba pathuko ğŸ˜‡ yenga ponalum yarkitayavadhu inform panitu pathu pathrama poitu va. unna ninachi oru uyir kavala patukittu iruku ğŸ˜</div>
          </div>
          <div class="page hidden" data-page="1" style="z-index:40">
            <h3 style="margin:0 0 8px;">ğŸ«‚</h3>
            <div style="max-width:90%;color:var(--muted)">yaar yenna sonalum, adhu naana irundhalum sari ğŸ˜“ adha-lam ketkadha ğŸ–¤ nee neeyavey irukradhu dhan Azhagu ğŸ’ enaku late-aa dhan purinjichi ğŸ˜“</div>
          </div>
          <div class="page hidden" data-page="2" style="z-index:30">
            <h3 style="margin:0 0 8px;">ğŸ¤ª</h3>
            <div style="max-width:90%;color:var(--muted)">avlo dhan</div>
          </div>
        </div>

        <div class="book-controls">
          <button class="ctrl" id="prevPage" aria-label="Previous page">Back</button>
          <button class="ctrl" id="nextPage" aria-label="Next page">Next</button>
        </div>
      </div>
    </section>

    <section class="card reveal" data-idx="7">
      <p class="section-title">chellom ğŸ¤—</p>
      <div class="poem">payadadha unala mudiyum ğŸ¤ğŸ«‚ naa sami kita vendikren ğŸ‘ exam nalla eludhu ğŸ¤— kanidipa pass aagiruva ğŸ˜˜ saptutu paathu safe-aa poitu va ğŸ˜‡</div>
    </section>

    <section class="card reveal" data-idx="8">
      <p class="section-title">neeyum ğŸ’• naanum </p>
      <div class="gift-wrapper">
        <div class="gift" id="finalGift" data-gift-end="1" tabindex="0" aria-label="Final gift 1">
          <div style="font-size:28px">ğŸ</div>
          <div style="font-size:13px;color:#3a2133;margin-top:8px;">photo</div>
        </div>
      </div>
    </section>

    <footer class="reveal" data-idx="9">
      <div class="heartbeat" aria-hidden="true" title="Heart">
        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
          <path d="M12 21s-7-4.2-9-6.6C0.6 10 4.6 5 8 7c1.2.9 1.9 2.2 2.9 2.2 1 0 1.7-1.3 2.9-2.2 3.4-2 7.4 3 5 7.4-2 2.4-9 6.6-9 6.6z" />
        </svg>
      </div>
      <div>Yendrum anbudan â€” un Karuva </div>
    </footer>
  </main>

  <div id="particle-layer" aria-hidden="false"></div>

  <div class="image-modal" id="imageModal" aria-hidden="true" role="dialog" aria-modal="true">
    <div class="image-card" role="document">
      <button class="close-btn" id="closeImage" aria-label="Close">âœ•</button>
      <img id="modalImage" alt="Keepsake image" src="image.jpg" onerror="this.style.display='none'; document.getElementById('imagePlaceholder').style.display='block'">
      <div id="imagePlaceholder" style="display:none; padding:36px; background:linear-gradient(180deg,#ffeef6,#fff);">
        <div style="font-size:28px; color:var(--accent-red); margin-bottom:8px;">ğŸ’Œ</div>
        <div style="font-size:18px; color:#341427;">Anbu kaditham â€” en heart la irundhu</div>
        <div style="color:var(--muted); margin-top:6px;">(image.jpg illa â€” ippo mudhalil placeholder)</div>
      </div>
      <div id="imgCaption" class="caption" style="display:none">yepoludhum un ninaivil ğŸ’•</div>
    </div>
  </div>

  <script>
    (function(){
      // PIN Protection Logic
      const CORRECT_PIN = "1718";
      const pinOverlay = document.getElementById('pinOverlay');
      const pinInputs = document.querySelectorAll('.pin-input');
      const pinError = document.getElementById('pinError');
      const pinSubmit = document.getElementById('pinSubmit');
      
      // Focus on first input
      pinInputs[0].focus();
      
      // Handle input for each PIN digit
      pinInputs.forEach((input, index) => {
        input.addEventListener('input', () => {
          // Move to next input when a digit is entered
          if (input.value && index < pinInputs.length - 1) {
            pinInputs[index + 1].focus();
          }
          
          // Validate PIN when all digits are entered
          if (index === pinInputs.length - 1 && input.value) {
            validatePin();
          }
        });
        
        // Allow backspace to move to previous input
        input.addEventListener('keydown', (e) => {
          if (e.key === 'Backspace' && !input.value && index > 0) {
            pinInputs[index - 1].focus();
          }
        });
      });
      
      // Submit button event
      pinSubmit.addEventListener('click', validatePin);
      
      // Validate the PIN
      function validatePin() {
        const enteredPin = Array.from(pinInputs).map(input => input.value).join('');
        
        if (enteredPin === CORRECT_PIN) {
          // Correct PIN - hide overlay and show content
          pinOverlay.classList.add('hidden');
          document.body.style.overflow = 'auto'; // Re-enable scrolling
        } else {
          // Incorrect PIN - show error and reset inputs
          pinError.textContent = 'Incorrect PIN. Please try again.';
          pinInputs.forEach(input => input.value = '');
          pinInputs[0].focus();
          
          // Add shake animation for visual feedback
          const container = document.querySelector('.pin-container');
          container.style.animation = 'shake 0.5s';
          setTimeout(() => {
            container.style.animation = '';
          }, 500);
        }
      }
      
      // Add shake animation to CSS
      const style = document.createElement('style');
      style.textContent = `
        @keyframes shake {
          0%, 100% { transform: translateX(0); }
          20%, 60% { transform: translateX(-10px); }
          40%, 80% { transform: translateX(10px); }
        }
      `;
      document.head.appendChild(style);

      const supportsVibrate = 'vibrate' in navigator;
      const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      const isMobile = window.matchMedia('(max-width:720px)').matches;

      // parallax blobs (optimized)
      const blobA = document.getElementById('blobA');
      const blobB = document.getElementById('blobB');
      function onScrollParallax(){ const y = window.scrollY || window.pageYOffset; if(blobA) blobA.style.transform = `translate3d(${y * -0.02}px,${y * 0.06}px,0) scale(${1 + Math.min(0.06, y/4000)})`; if(blobB) blobB.style.transform = `translate3d(${y * 0.02}px,${y * -0.04}px,0) scale(${1 + Math.min(0.05, y/6000)})`; }
      window.addEventListener('scroll', onScrollParallax, { passive:true });

      // particles (pooled) - performance tuned
      const EMOJIS = ['â¤ï¸','ğŸ˜','ğŸ’•','ğŸ˜˜','ğŸ«‚','ğŸ¥°','ğŸ˜‰','ğŸŒ¹'];
      const HEART_SVG_WHITE = '<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path fill="%23ffffff" d="M12 21s-7-4.2-9-6.6C0.6 10 4.6 5 8 7c1.2.9 1.9 2.2 2.9 2.2 1 0 1.7-1.3 2.9-2.2 3.4-2 7.4 3 5 7.4-2 2.4-9 6.6-9 6.6z"/></svg>';
      const COLORS = ['#ff4d86','#ff9ccf','#ffdff0','#ffb6dd'];

      const layer = document.getElementById('particle-layer');
      const pool = [];
      const active = new Set();
      const MAX = isMobile ? 520 : 1400;
      const INITIAL_POOL = isMobile ? 18 : 48;

      for(let i=0;i<INITIAL_POOL;i++){
        const el = document.createElement('div');
        el.className='particle';
        el.style.opacity='0';
        el.style.pointerEvents='auto';
        el._x = 0; el._y = 0;
        el.addEventListener('pointerdown', e=> { e.stopPropagation(); popParticle(el); }, {passive:true});
        pool.push(el);
      }

      function obtainParticle(){ if(pool.length) return pool.pop(); if(active.size + pool.length < MAX){ for(let i=0;i<8;i++){ const el = document.createElement('div'); el.className='particle'; el.style.opacity='0'; el.style.pointerEvents='auto'; el._x = 0; el._y = 0; el.addEventListener('pointerdown', e=> { e.stopPropagation(); popParticle(el); }, {passive:true}); pool.push(el);} return pool.pop(); } return null; }
      function releaseParticle(el){ if(!el) return; el.style.pointerEvents='none'; el.style.opacity='0'; if(el.parentNode) el.parentNode.removeChild(el); active.delete(el); pool.push(el); }

      function spawnAt(x,y,count=1,opts={}){ opts=opts||{}; for(let i=0;i<count;i++){ if(active.size > MAX) return; const el = obtainParticle(); if(!el) return; const useEmoji = Math.random()>0.28; if(useEmoji){ el.textContent = EMOJIS[Math.floor(Math.random()*EMOJIS.length)]; el.style.fontSize=(12+Math.floor(Math.random()*22))+'px'; el.innerHTML = el.textContent; } else { el.innerHTML = HEART_SVG_WHITE; const path = el.querySelector('path'); if(path) path.setAttribute('fill', COLORS[Math.floor(Math.random()*COLORS.length)]); } const size=(opts.minSize||14)+Math.round(Math.random()*(opts.maxSize||36)); el.style.width = size+'px'; el.style.height = size+'px'; const dx = (-0.5+Math.random())*(opts.spread||44); const dy = (-0.5+Math.random())*(opts.spread||44); const sx = Math.max(6, Math.min(window.innerWidth-6, x+dx)); const sy = Math.max(6, Math.min(window.innerHeight-6, y+dy)); el._x = sx; el._y = sy; el.style.left = sx + 'px'; el.style.top = sy + 'px'; el._vx = (-0.6 + Math.random()*1.2)*(0.6 + Math.random()); el._vy = -1.2 - Math.random()*2.2; el._ax = 0; el._ay = 0.03 + Math.random()*0.06; el._created = performance.now(); el._life = 1200 + Math.random()*2600; el._rot = (-20 + Math.random()*40); el._rotSpeed = (-0.6 + Math.random()*1.2); el._popped = false; el.style.opacity='1'; layer.appendChild(el); active.add(el);} }

      function spawnHeartsAt(x,y,count=1,opts={}){ opts=opts||{}; for(let i=0;i<count;i++){ const el = obtainParticle(); if(!el) return; el.innerHTML = HEART_SVG_WHITE; const path = el.querySelector('path'); if(path) path.setAttribute('fill', COLORS[Math.floor(Math.random()*COLORS.length)]); const size=(opts.minSize||16)+Math.round(Math.random()*(opts.maxSize||46)); el.style.width=size+'px'; el.style.height=size+'px'; const dx = (-0.5+Math.random())*(opts.spread||72); const dy = (-0.5+Math.random())*(opts.spread||72); const sx = Math.max(6, Math.min(window.innerWidth-6, x+dx)); const sy = Math.max(6, Math.min(window.innerHeight-6, y+dy)); el._x = sx; el._y = sy; el.style.left = sx + 'px'; el.style.top = sy + 'px'; el._vx = (-0.6 + Math.random()*1.2)*(0.6 + Math.random()); el._vy = -1.0 - Math.random()*1.8; el._ax = 0; el._ay = 0.02+Math.random()*0.04; el._created = performance.now(); el._life = 1000 + Math.random()*2000; el._rot = (-10 + Math.random()*20); el._rotSpeed = (-0.3 + Math.random()*0.6); el._popped=false; el.style.opacity='1'; layer.appendChild(el); active.add(el);} }

      function popParticle(el){ if(!el || el._popped) return; el._popped = true; el.animate([{ transform: 'translate(-50%,-50%) scale(1)', opacity:1 }, { transform:'translate(-50%,-50%) scale(1.8)', opacity:0 }], { duration:260, easing:'cubic-bezier(.2,.9,.3,1)'}); try{ if(supportsVibrate) navigator.vibrate(12);}catch(e){} setTimeout(()=> releaseParticle(el), 300); }

      let last = performance.now();
      function tick(now){
        const dt = now - last;
        last = now;
        if(active.size){
          const toRemove = [];
          active.forEach(el=>{
            if(el._popped) return;
            const age = now - el._created;
            if(age > el._life){
              el._popped = true;
              el.animate([{ opacity:1 }, { opacity:0 }], { duration:260, easing:'linear' });
              setTimeout(()=> releaseParticle(el), 300);
              return;
            }
            el._vx += el._ax * (dt * 0.06);
            el._vy += el._ay * (dt * 0.06);
            el._x += el._vx * (dt * 0.06) * 18;
            el._y += el._vy * (dt * 0.06) * 18;
            el._rot = (el._rot + el._rotSpeed * (dt * 0.06) * 6) % 360;
            el.style.left = el._x + 'px';
            el.style.top = el._y + 'px';
            el.style.transform = `translate(-50%,-50%) rotate(${el._rot}deg)`;
            if(age > el._life * 0.72) el.style.opacity = String(Math.max(0, 1 - ((age - el._life * 0.72) / (el._life * 0.28))));
            if(el._y > window.innerHeight + 160 || el._x < -160 || el._x > window.innerWidth + 160) toRemove.push(el);
          });
          toRemove.forEach(releaseParticle);
        }
        raf = requestAnimationFrame(tick);
      }
      let raf = requestAnimationFrame(tick);

      // pointer interactions
      let longTimer=null, rainInterval=null, rainOrigin=null;
      const rainRate = isMobile ? 220 : 140;
      const app = document.getElementById('app');

      document.addEventListener('contextmenu', (e)=>{ if(e.target.closest && e.target.closest('#app')) e.preventDefault(); }, { passive:false });

      function pointerDown(e){
        if(e.button && e.button !== 0) return;
        const x = e.clientX, y = e.clientY;
        spawnHeartsAt(x,y, 12, { spread:160, minSize:14, maxSize:42 });
        longTimer = setTimeout(()=> startRain(x,y), 480);
      }
      function pointerMove(e){ if(rainInterval) rainOrigin = { x: e.clientX, y: e.clientY }; }
      function pointerUp(){ clearTimeout(longTimer); stopRain(); }
      function startRain(x = window.innerWidth/2, y = -20){
        if(rainInterval) return; rainOrigin = { x,y }; rainInterval = setInterval(()=> { const rx = rainOrigin.x + (-36 + Math.random()*72); const ry = rainOrigin.y + (-20 + Math.random()*40); spawnAt(rx, ry, 6 + Math.floor(Math.random()*8), { spread: 84 }); }, rainRate);
      }
      function stopRain(){ if(rainInterval){ clearInterval(rainInterval); rainInterval=null; rainOrigin=null; } }
      app.addEventListener('pointerdown', pointerDown, { passive:true });
      app.addEventListener('pointermove', pointerMove, { passive:true });
      window.addEventListener('pointerup', pointerUp, { passive:true });
      window.addEventListener('pointercancel', pointerUp, { passive:true });

      // reveal animations
      const reveals = document.querySelectorAll('.reveal');
      const io = new IntersectionObserver((entries, obs)=>{ entries.forEach(entry=>{ if(entry.isIntersecting){ const el = entry.target; const idx = Math.max(0, parseInt(el.dataset.idx||'0',10)); const delay = Math.min(900, idx * 100); if(prefersReduced) el.classList.add('visible'); else setTimeout(()=> el.classList.add('visible'), delay); obs.unobserve(el); } }); }, { root:null, rootMargin:'0px 0px -10% 0px', threshold:0.12 });
      reveals.forEach(r => io.observe(r));

      // drag & flip
      let dragging=null, dragStart=null, dragElClone=null, currentIndex=-1;
      function pointerDownFlip(e){
        const el = e.currentTarget;
        if(e.button && e.button !== 0) return;
        dragging = el; dragStart = { x:e.clientX, y:e.clientY }; currentIndex = Array.from(el.parentNode.children).indexOf(el);
        try{ el.setPointerCapture && el.setPointerCapture(e.pointerId); }catch(err){}
        dragElClone = el.cloneNode(true);
        dragElClone.style.position='fixed';
        const r = el.getBoundingClientRect();
        dragElClone.style.left = r.left+'px';
        dragElClone.style.top = r.top+'px';
        dragElClone.style.width = el.offsetWidth+'px';
        dragElClone.style.zIndex = 200;
        dragElClone.classList.add('dragging');
        document.body.appendChild(dragElClone);
        el.style.opacity='0.18';
      }
      function pointerMoveFlip(e){ if(!dragging || !dragElClone) return; const dx = e.clientX - dragStart.x; const dy = e.clientY - dragStart.y; dragElClone.style.transform = `translate(${dx}px,${dy}px) rotate(${dx/20}deg)`; }
      function pointerUpFlip(e){
        if(!dragging) return;
        const parent = dragging.parentNode; const children = Array.from(parent.children);
        const cx = e.clientX; let nearestIdx = currentIndex; let minDist = Infinity;
        children.forEach((ch, idx)=>{ const r = ch.getBoundingClientRect(); const center = r.left + r.width/2; const d = Math.abs(center - cx); if(d < minDist){ minDist = d; nearestIdx = idx; } });
        const reference = children[nearestIdx];
        if(reference && reference !== dragging){
          if(nearestIdx > currentIndex) parent.insertBefore(dragging, reference.nextSibling); else parent.insertBefore(dragging, reference);
        }
        if(dragElClone && dragElClone.parentNode) dragElClone.parentNode.removeChild(dragElClone);
        dragging.style.opacity='';
        try{ if(dragging && dragging.releasePointerCapture && e.pointerId !== undefined){ dragging.releasePointerCapture(e.pointerId); } }catch(e){}
        dragging=null; dragElClone=null; dragStart=null; currentIndex=-1;
      }

      // Attach events but skip drag for flip-cards inside sections with data-drag="false"
      document.querySelectorAll('.flip-card').forEach(fc=>{
        const noDrag = fc.closest('[data-drag="false"]');
        fc.addEventListener('click', (e)=>{ if(dragElClone) return; fc.classList.toggle('flipped'); }, {passive:true});
        fc.addEventListener('keydown', e=>{ if(e.key==='Enter' || e.key===' '){ e.preventDefault(); fc.classList.toggle('flipped'); } });
        if(!noDrag){
          fc.addEventListener('pointerdown', pointerDownFlip);
          fc.addEventListener('pointermove', pointerMoveFlip);
          fc.addEventListener('pointerup', pointerUpFlip);
          fc.addEventListener('pointercancel', pointerUpFlip);
        } else {
          fc.style.touchAction = 'manipulation';
        }
      });

      // MEMORY BOOK
      const pages = Array.from(document.querySelectorAll('.page'));
      let currentPage = 0;
      function showPage(idx){
        pages.forEach((p,i)=> {
          const isFirst = p.dataset.page === '0';
          const scale = isFirst ? 0.96 : 1;
          if(i === idx){
            p.classList.remove('hidden');
            p.style.zIndex = 50 - i;
            p.style.transform = `rotateY(0deg) scale(${scale})`;
            p.style.opacity = '1';
          } else if(i < idx){
            p.classList.add('hidden');
            p.style.zIndex = 30 - i;
            p.style.transform = `rotateY(-180deg) scale(${scale})`;
            p.style.opacity = '0';
          } else {
            p.classList.add('hidden');
            p.style.zIndex = 20 - i;
            p.style.transform = `rotateY(0deg) scale(${scale})`;
            p.style.opacity = '0';
          }
        });
      }
      showPage(0);
      document.getElementById('nextPage').addEventListener('click', ()=>{
        if(currentPage < pages.length - 1){
          pages[currentPage].classList.add('turning');
          setTimeout(()=> { pages[currentPage].classList.add('hidden'); pages[currentPage].classList.remove('turning'); currentPage++; showPage(currentPage); }, 420);
        }
      }, {passive:true});
      document.getElementById('prevPage').addEventListener('click', ()=>{ if(currentPage > 0){ currentPage--; showPage(currentPage); pages[currentPage].classList.remove('hidden'); } }, {passive:true});

      (function(){
        const view = document.getElementById('bookView'); let sx=0, swiping=false;
        view.addEventListener('pointerdown', (e)=>{ sx = e.clientX; swiping = true; }, {passive:true});
        view.addEventListener('pointerup', (e)=>{ if(!swiping) return; const dx = e.clientX - sx; if(dx < -48) document.getElementById('nextPage').click(); else if(dx > 48) document.getElementById('prevPage').click(); swiping=false; }, {passive:true});
        view.addEventListener('pointercancel', ()=> swiping=false, {passive:true});
      })();

      // image modal
      const finalGift = document.getElementById('finalGift');
      const imageModal = document.getElementById('imageModal');
      const closeImage = document.getElementById('closeImage');
      const modalImage = document.getElementById('modalImage');
      const imagePlaceholder = document.getElementById('imagePlaceholder');
      const imgCaption = document.getElementById('imgCaption');

      function openImageModal(){
        imageModal.classList.add('open'); imageModal.setAttribute('aria-hidden','false');
        const rect = finalGift.getBoundingClientRect();
        spawnHeartsAt(rect.left + rect.width/2, rect.top + rect.height/2, 40, { spread:260 });
        confetti(rect.left + rect.width/2, rect.top + rect.height/2, 64);
        setTimeout(()=> { if(modalImage && modalImage.complete && modalImage.naturalWidth !== 0) imgCaption.style.display = 'block'; else imagePlaceholder.style.display = 'block'; }, 150);
        const focusable = imageModal.querySelectorAll('button, [href], input, textarea, select, [tabindex]:not([tabindex="-1"])');
        if(focusable.length) focusable[0].focus();
      }
      function closeImageModal(){ imageModal.classList.remove('open'); imageModal.setAttribute('aria-hidden','true'); imagePlaceholder.style.display = 'none'; imgCaption.style.display = 'none'; }
      finalGift && finalGift.addEventListener('click', openImageModal, {passive:true});
      closeImage && closeImage.addEventListener('click', closeImageModal, {passive:true});
      imageModal.addEventListener('click', (e)=> { if(e.target === imageModal) closeImageModal(); });
      document.addEventListener('keydown', (e)=>{ if(e.key === 'Escape') closeImageModal(); });

      function confetti(cx,cy,count=50){
        for(let i=0;i<count;i++){
          const n = document.createElement('div');
          n.style.position='fixed'; n.style.left = (cx + (-120 + Math.random()*240)) + 'px';
          n.style.top = (cy + (-40 + Math.random()*40)) + 'px';
          const w = 6 + Math.random()*8, h = 6 + Math.random()*12;
          n.style.width = w + 'px'; n.style.height = h + 'px';
          n.style.background = COLORS[Math.floor(Math.random()*COLORS.length)];
          n.style.borderRadius = (Math.random()*6)+'px';
          n.style.zIndex = 320; n.style.pointerEvents = 'none'; n.style.opacity = '0.98';
          document.body.appendChild(n);
          const dx = (-120 + Math.random()*240), dy = (120 + Math.random()*160 + Math.random()*120), rot = (Math.random()*360), dur = 700 + Math.random()*900;
          n.animate([{ transform:'translate(0,0) rotate(0deg)', opacity:1 }, { transform:`translate(${dx}px,${dy}px) rotate(${rot}deg)`, opacity:0 }], { duration: dur, easing:'cubic-bezier(.2,.8,.25,1)' });
          setTimeout(()=> n.remove(), dur+80);
        }
      }

      // footer bursts
      document.querySelectorAll('[data-gift-end]').forEach(g=>{ g.addEventListener('click', (e)=>{ const rect = g.getBoundingClientRect(); spawnHeartsAt(rect.left + rect.width/2, rect.top + rect.height/2, 24, { spread:180 }); confetti(rect.left + rect.width/2, rect.top + rect.height/2, 36); }, {passive:true}); });

      if(prefersReduced) document.querySelectorAll('.reveal').forEach(el=> el.classList.add('visible'));
      window.addEventListener('load', ()=>{ const first = document.querySelector('.reveal'); if(first) first.classList.add('visible'); spawnHeartsAt(window.innerWidth/2, 110, isMobile ? 8 : 18, { spread: 260 }); });
      setInterval(()=>{ if(active.size > Math.max(500, Math.floor(MAX*0.85))){ const arr = Array.from(active).slice(0, Math.floor(active.size/4)); arr.forEach(el => { el._popped = true; if(el.parentNode) el.parentNode.removeChild(el); active.delete(el); }); } }, 2400);

    })();
  </script>
</body>
</html>
